<div #galleryContainer class="image-gallery">
  <div
    *ngFor="let row of layoutRows"
    class="gallery-row"
    [class.last-row]="row.isLastRow"
    [style.height.px]="row.height"
    [style.gap.px]="row.spacing || 10"
  >
    <div
      *ngFor="let image of row.images"
      class="image-item"
      [style.width.px]="image.displayWidth"
      [style.height.px]="image.displayHeight"
      (click)="openModal(image)"
    >
      <img
        [ngSrc]="image.url"
        [width]="image.displayWidth"
        [height]="image.displayHeight"
        [alt]="image.alt || ''"
      />
      <div class="overlay">
        <div class="image-details">
          <span>{{ image.timestamp | date : 'dd.MM.yyyy' }}</span>
          <div *ngIf="image.tags" class="image-tags">
            <span *ngFor="let tag of image.tags" class="image-tag">{{
              tag
            }}</span>
          </div>
        </div>
        <div *ngIf="image.alt" class="image-alt">{{ image.alt }}</div>
      </div>
    </div>
  </div>
</div>

<app-image-modal
  *ngIf="selectedImage"
  [image]="selectedImage"
  (close)="closeModal()"
></app-image-modal>
